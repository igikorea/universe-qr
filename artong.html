<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>유니에듀 앱 실행 중...</title>
    <script>
      const ua = navigator.userAgent.toLowerCase();
      const isAndroid = ua.includes("android");
      const isIOS = /iphone|ipad|ipod/.test(ua);

      // 앱 실행 링크
      const iosScheme = "uniedu://page/ar-tong";
      const androidIntent = "intent://page/ar-tong/#Intent;scheme=uniedu;package=com.igikorea.uni_edu;action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;S.browser_fallback_url=https://play.google.com/store/apps/details?id=com.igikorea.uni_edu;end";

      // 스토어 링크
      const appStoreURL = "itms-apps://itunes.apple.com/kr/app/%EC%9C%A0%EB%8B%88%EB%B2%84%EC%8A%A4/id6748672708";

      if (isAndroid) {
        // ✅ Chrome이 직접 intent 처리 (fallback 포함)
        window.location.replace(androidIntent);
      } else if (isIOS) {
          const appStoreURL = "itms-apps://apps.apple.com/kr/app/유니버스/id6748672708";
          const iosScheme = "uniedu://page/ar-tong";

          let movedToBackground = false;
          let storeTimer;

          // 백그라운드 감지
          const handleBackground = () => {
            movedToBackground = true;
            clearTimeout(storeTimer);
          };

          document.addEventListener("visibilitychange", () => {
            if (document.hidden) handleBackground();
          });
          window.addEventListener("blur", handleBackground);
          window.addEventListener("pagehide", handleBackground);

          // iframe을 통한 앱 실행 시도 (Safari 대응)
          const iframe = document.createElement("iframe");
          iframe.style.display = "none";
          iframe.src = iosScheme;
          document.body.appendChild(iframe);

          // 앱 미설치 시 fallback
          storeTimer = setTimeout(() => {
            if (!movedToBackground) {
              console.log("앱이 설치되어 있지 않음 → App Store 이동");
              window.location.href = appStoreURL;
            }
          }, 1500);
        }
    </script>
  </head>
</html>

<!--<!DOCTYPE html>-->
<!--<html lang="ko">-->
<!--  <head>-->
<!--    <meta charset="utf-8" />-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0" />-->
<!--    <title>유니에듀 앱 실행 중...</title>-->
<!--    <script>-->
<!--      window.onload = function () {-->
<!--        const ua = navigator.userAgent.toLowerCase();-->
<!--        const isAndroid = ua.indexOf("android") > -1;-->
<!--        const isiOS = /iphone|ipad|ipod/.test(ua);-->
<!--        -->
<!--        const appStoreURL = "itms-apps://apps.apple.com/kr/app/%EC%9C%A0%EB%8B%88%EB%B2%84%EC%8A%A4/id6748672708";-->
<!--        const playStoreURL = "https://play.google.com/store/apps/details?id=com.igikorea.uni_edu&hl=ko";-->
<!---->
<!--        if (isiOS) {-->
<!--            window.location.href = appStoreURL;-->
<!--        } else if (isAndroid) {-->
<!--            window.location.href = playStoreURL;-->
<!--        }-->
<!--      };-->
<!--    </script>-->
<!--  </head>-->
<!--  <body>-->
<!--    <h3>유니에듀 앱을 여는 중입니다...</h3>-->
<!--  </body>-->
<!--</html>-->
